
		<link href="https://cdn.staticfile.org/twitter-bootstrap/3.4.1/css/bootstrap.min.css" rel="stylesheet">

		<script src="js/webadb.js"></script>
		<script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
		<script src="js/main.js"></script>
	
	<body>
	
		<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
			<div class="container-fluid">
				<div class="navbar-header">
					<a class="navbar-brand" href="#">web1n</a>
				     <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#collapse-nav">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
				</div>
				
				<div class="collapse navbar-collapse" id="collapse-nav">
					<ul class="nav navbar-nav">
						<li class="active"><a href="#">Adb 在线执行器</a></li>
						<li><a href="https://adb.http.gs/stopapp.html">小黑屋激活器</a></li>
						<li><a href="https://adb.http.gs/icebox.html">冰箱激活器</a></li>
					</ul>
				
					<ul class="nav navbar-nav navbar-right">
						<li class="dropdown">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown">
								我的软件
								<b class="caret"></b>
							</a>
							<ul class="dropdown-menu">
								<li><a href="https://stopapp.https.gs/">小黑屋</a></li>
								<li><a href="https://www.coolapk.com/apk/com.web1n.permissiondog">权限狗</a></li>
								<li><a href="#">aF (beta)</a></li>
								<li class="divider"></li>
								<li><a href="https://adb.http.gs/">Adb 在线执行器</a></li>
								<li><a href="#">科大校园网</a></li>
							</ul>
						</li>
					</ul>
				</div>
			</div>
		</nav>
	
		<div class="container" style="padding-top: 72px">
			<div class="alert alert-danger" id="nowebusb">
				<strong>警告！</strong> 您的浏览器不支持 <a href="https://wicg.github.io/webusb">WebUSB API</a> ! 如果您是 Chrome 用户, 请确认浏览器版本为 61 及以上. <br>
				<a href="https://www.google.cn/intl/zh-CN/chrome/">下载最新版本 Chrome</a>
			</div>

			<div class="row">
				<div class="col-sm-8">
					<div class="jumbotron">
						<h2>Adb 在线执行器
							<small>
								<span class="label label-primary">beta</span>
							</small>
						</h2>
						<p>
							本工具使用 <a href="https://developer.android.com/studio/command-line/adb.html" target="_blank">ADB</a> 协议及
							<a href="https://wicg.github.io/webusb" target="_blank">WebUSB</a> 来通过数据线连接你的 Android 设备.<br>
							整个过程在本地进行, 不会进行在线数据传输. <button class="btn btn-primary btn-sm" data-toggle="modal" data-target="#changeLog">更新日志</button>
						</p>
					</div>
				</div>

				<div class="col-sm-4">
					<div class="panel panel-success">
						<div class="panel-heading">
							<h3 class="panel-title">如何使用?</h3>
						</div>
						<div class="panel-body">
							如果您是安卓手机, 那么可以使用 otg 数据线连接另一个安卓设备(两个没有 Root 的手机之间可以互相激活黑阈服务什么的, 嘿嘿嘿).<br>
							如果您是电脑, 那么直接连接安卓设备即可(需要安装驱动, 不需要安装 adb).<br><br>	
							点击下方"连接到设备"后在弹出的对话框内选中您的设备, 然后在手机端确认授权后就可以随意玩耍了.~(￣▽￣)~*<br><br>
							使用完毕后记得断开设备哦.
						</div>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-sm-8">
					<div class="panel panel-info">
						<div class="panel-heading">
							<h3 class="panel-title">设备选项</h3>
						</div>
						<div class="panel-body">
							<button class="btn btn-success" onclick="connect()">连接到设备</button>
							<button class="btn btn btn-danger" onclick="disconnect()">断开连接</button>
					
							<div class="pull-right">
								当前连接设备: <span class="badge" id="device_name"></span>
							</div>
						</div>
						<div class="panel-footer">
							点击以上按钮进行设备的连接与断开(碎碎念)
						</div>
					</div>
					
					<div class="panel panel-default">
						<div class="panel-heading">
							<h3 class="panel-title">网络 Adb</h3>
						</div>
						<div class="panel-body">
							<div class="input-group">
								<span class="input-group-addon">端口号</span>
								<input type="number" id="tcpip" class="form-control" placeholder="5555" value="5555" oninput="if(value.length>5)value=value.slice(0,5)">
								<span class="input-group-btn">
									<button class="btn btn-success" onclick="wifiAdb(true)">开启网络 Adb</button>
									<button class="btn btn btn-warning" onclick="wifiAdb(false)">关闭网络 Adb</button>
								</span>
							</div>
						</div>
						<div class="panel-footer">
							输入端口号后点击开启/关闭网络 Adb 即可.
						</div>
					</div>
				</div>
				
				<div class="col-sm-4">
					<div class="panel panel-warning">
						<div class="panel-heading">
							<h3 class="panel-title">性感开发者在线恰饭</h3>
						</div>
						<div>
							<img class="center-block img-responsive img-rounded" src="images/alipay.png">
						</div>
						<div class="list-group">
							<a href="https://www.coolapk.com/apk/web1n.stopapp" onclick="exec_shell('am start -a android.intent.action.VIEW https://www.coolapk.com/apk/web1n.stopapp')" class="list-group-item" target="_blank">
								<h4 class="list-group-item-heading">
									小黑屋
									<div class="pull-right">
										<span class="badge">40 万下载量</span>
										<span class="badge">热</span>
									</div>
								</h4>
								<p class="list-group-item-text">
									小黑屋是一个支持免 Root 管控应用后台(冻结应用)的手机工具.
								</p>
							</a>
						</div>
					</div>
				</div>
			</div>
			
			<div class="row">
				<div class="col-sm-6">
					<div class="panel panel-default">
						<div class="panel-heading">
							<h3 class="panel-title">激活选项</h3>
						</div>
						<div class="panel-body">
							<label>普通激活操作</label>
							<p>
								<button type="button" class="btn btn-default" onclick="exec_shell('sh /sdcard/Android/data/web1n.stopapp/files/demon.sh')">小黑屋麦克斯韦妖</button>
								<button type="button" class="btn btn-default" onclick="exec_shell('sh /sdcard/Android/data/com.catchingnow.icebox/files/start.sh')">冰箱普通 Adb 模式</button>
								<button type="button" class="btn btn-default" onclick="exec_shell('sh /sdcard/Android/data/com.web1n.permissiondog/files/starter.sh')">权限狗 Adb 模式</button>
								<button type="button" class="btn btn-default" onclick="exec_shell('sh /sdcard/Android/data/com.web1n.forcestop_task/files/starter.sh')">aF (beta)</button>
								<button type="button" class="btn btn-default" onclick="exec_shell('sh /sdcard/Android/data/moe.shizuku.privileged.api/files/start.sh')">Shizuku</button>
								<button type="button" class="btn btn-default" onclick="exec_shell('sh /data/data/me.piebridge.brevent/brevent.sh')">黑阈</button>
							</p>
							<p><span class="badge">tips</span> 请根据对应软件的激活教程判断是否激活成功</p>
						</div>
							
						<div class="panel-body">
							<label>设置设备管理员</label>
							<p>
								<button type="button" class="btn btn-default" onclick="setDeviceOwner('web1n.stopapp/.receiver.AdminReceiver')">小黑屋设备管理员</button>
								<button type="button" class="btn btn-default" onclick="setDeviceOwner('com.catchingnow.icebox/.receiver.DPMReceiver')">冰箱设备管理员</button>
							</p>
							<p><span class="badge">tips</span> 设置设备管理员的操作会自动移除所有账号与用户</p>
						</div>
					</div>
				</div>

				<div class="col-sm-6">
					<div class="panel panel-default">
						<div class="panel-heading">
							<h3 class="panel-title">发送文件到手机</h3>
						</div>
						<div class="panel-body">
							<table class="table" style="margin-bottom: 0">
								<tbody>
									<tr>
										<td style="border-top: 0"><label>电脑文件</label></td>
										<td style="border-top: 0">
											<div class="input-group" onclick="loadFile()">
												<p id="fileName" class="form-control" style="font-size: small;cursor:pointer" oncontextmenu="return false">未选择文件</p>
												<span class="input-group-btn">
													<button class="btn btn-default" type="button">选择文件</button>
												</span>
											</div>
											<input type="file" id="file" style="display: none">
										</td>
									</tr>
									<tr>
										<td><label>手机文件目录</label></td>
										<td>
											<div class="input-group">
												<input type="text" id="remotefilePath" class="form-control" placeholder="/sdcard/abc.txt" required="required">
												<span class="input-group-btn">
													<button class="btn btn-info" onclick="pushFile()">发送文件</button>
												</span>
											</div>
										</td>
									</tr>
								</tbody>
							</table>
						</div>
						<div class="panel-footer">
							先选择电脑上的文件, 然后输入手机目录. 点击"发送"即可.
						</div>
					</div>
				</div>
				
				<div class="col-sm-6">
					<div class="panel panel-default">
						<div class="panel-heading">
							<h3 class="panel-title">安装 apk 文件</h3>
						</div>
						<div class="panel-body">
							<div class="btn-group">
								<div class="input-group">
									<span class="input-group-addon">选择文件</span>
									<p id="apkFileName" class="form-control" style="font-size: small;cursor:pointer" oncontextmenu="return false" onclick="loadApkFile()">未选择文件</p>
									<span class="input-group-btn">
										<button class="btn btn-default" onclick="installApkFile()">安装</button>
									</span>
								</div>
								<input type="file" accept="application/vnd.android.package-archive" id="apkFile" style="display: none">
							</div>
						</div>
					</div>
				</div>
				
				<div class="col-sm-6">
					<div class="panel panel-default">
						<div class="panel-heading">
							<h3 class="panel-title">执行指令</h3>
						</div>
						<div class="panel-body">
							<div class="btn-group">
								<div class="input-group">
									<span class="input-group-addon">指令</span>
									<input type="text" id="shell" class="form-control" placeholder="ls -lh" required="required">
									<span class="input-group-btn">
										<button class="btn btn-info" type="button" onclick="exec_command()">执行</button>
									</span>
								</div>
							</div>
						</div>
						<div class="panel-footer">
							指令执行成功后会弹框提示, 执行结果会在页面底部显示.
						</div>
					</div>
				</div>


				<div class="col-sm-6">
					<div class="panel panel-default">
						<div class="panel-heading">
							<h3 class="panel-title">
								应用管理
							</h3>
						</div>
						<div class="panel-body">
							<div class="pull-left">
								<label>只能显示第三方应用的包名, 以及提供强制停止应用和卸载应用功能.</label>
							</div>
							<div class="pull-right">
								<button class="btn btn-info" type="button" onclick="loadPackageList()">刷新应用列表</button>
							</div>
							<table class="table" style="margin-bottom: 0">
								<thead>
									<tr>
										<th>包名</th>
										<th>详情</th>
										<th>操作</th>
									</tr>
								</thead>
								<tbody id="package-list">
									<tr>
										<td>请先刷新应用列表</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>

				<div class="col-sm-6">
					<div class="panel panel-default">
						<div class="panel-heading">
							<h3 class="panel-title">其他选项</h3>
						</div>
						<div class="panel-body">
							<button type="button" class="btn btn-default" onclick="exec_shell('reboot')">重启</button>
							<button type="button" class="btn btn-default" onclick="exec_shell('reboot recovery')">重启到 Recovery</button>
						</div>
					</div>
				</div>
			</div>

			<div class="panel panel-info" id="exec-result">
				<div class="panel-heading">
					<h3 class="panel-title">执行结果</h3>
				</div>
				<div class="panel-body">
					<div class="progress" id="progress">
						<div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 100%;">
						</div>
					</div>
				
					<pre id="log">这里是执行结果~~~</pre>
				</div>
				<div class="panel-footer">
					执行结果会显示在上面, 把它当作是虚拟终端就好啦
				</div>
			</div>

			<div class="well">
				<p><label>关于学习 adb 协议, 可能用得到的一些连接</label></p>
				<p><a href="https://www.javatt.com/p/75699" target="_blank">android adb tcpip 协议流程分析</a></p>
				<p><a href="https://github.com/webadb/webadb.js" target="_blank">webadb.js</a></p>
			</div>
		</div>
		
		<div class="jumbotron text-center" style="margin-bottom:0">
			<p>copyright 2020 web1n.</p>
		</div>
		
		<div class="modal fade" id="changeLog" aria-labelledby="myModalLabel" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
						<h4 class="modal-title" id="myModalLabel">Adb 在线执行器</h4>
					</div>
					<div class="modal-body">
						<p>版本修改记录</p>
						<code>
							v3:<br>
							设置设备管理员前会自动移除所有账号与用户.<br>
							v2:<br>
							增加鸡肋的应用管理功能.<br>
							支持安装 apk 功能.<br>
							v1:<br>
							初始版本.<br>
						</code>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
					</div>
				</div><!-- /.modal-content -->
			</div><!-- /.modal -->
		</div>

		<script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>

